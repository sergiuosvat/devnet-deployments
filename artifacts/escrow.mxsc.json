{
    "buildInfo": {
        "rustc": {
            "version": "1.91.1",
            "commitHash": "ed61e7d7e242494fb7057f2657300d9e77bb4fcb",
            "commitDate": "2025-11-07",
            "channel": "Stable",
            "host": "aarch64-apple-darwin",
            "short": "rustc 1.91.1 (ed61e7d7e 2025-11-07)",
            "llvmVersion": "21.1"
        },
        "contractCrate": {
            "name": "escrow",
            "version": "0.1.0"
        },
        "framework": {
            "name": "multiversx-sc",
            "version": "0.64.1"
        }
    },
    "abi": {
        "docs": [
            "ACP Escrow Contract â€” locks funds for agent jobs, releases on proof verification,",
            "refunds if deadline passes without verified proof.",
            "",
            "Follows Checks-Effects-Interactions pattern throughout."
        ],
        "name": "EscrowContract",
        "constructor": {
            "inputs": [
                {
                    "name": "validation_contract_address",
                    "type": "Address"
                },
                {
                    "name": "identity_contract_address",
                    "type": "Address"
                }
            ],
            "outputs": []
        },
        "upgradeConstructor": {
            "inputs": [],
            "outputs": []
        },
        "endpoints": [
            {
                "docs": [
                    "Deposit funds into escrow for a specific job.",
                    "Accepts EGLD or any ESDT token.",
                    "`deadline` is a Unix timestamp (seconds) after which a refund is allowed."
                ],
                "name": "deposit",
                "mutability": "mutable",
                "payableInTokens": [
                    "*"
                ],
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes"
                    },
                    {
                        "name": "receiver",
                        "type": "Address"
                    },
                    {
                        "name": "poa_hash",
                        "type": "bytes"
                    },
                    {
                        "name": "deadline",
                        "type": "u64"
                    }
                ],
                "outputs": []
            },
            {
                "docs": [
                    "Release escrowed funds to the receiver.",
                    "Only callable by the employer. Job must be verified in the ValidationRegistry."
                ],
                "name": "release",
                "mutability": "mutable",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes"
                    }
                ],
                "outputs": []
            },
            {
                "docs": [
                    "Refund escrowed funds to the employer if the deadline has passed.",
                    "Anyone can call this (allows automated cleanup)."
                ],
                "name": "refund",
                "mutability": "mutable",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes"
                    }
                ],
                "outputs": []
            },
            {
                "name": "get_escrow",
                "mutability": "readonly",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes"
                    }
                ],
                "outputs": [
                    {
                        "type": "EscrowData"
                    }
                ]
            },
            {
                "name": "get_validation_contract_address",
                "mutability": "readonly",
                "inputs": [],
                "outputs": [
                    {
                        "type": "Address"
                    }
                ]
            },
            {
                "name": "get_identity_contract_address",
                "mutability": "readonly",
                "inputs": [],
                "outputs": [
                    {
                        "type": "Address"
                    }
                ]
            }
        ],
        "events": [
            {
                "identifier": "escrow_deposited",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes",
                        "indexed": true
                    },
                    {
                        "name": "employer",
                        "type": "Address",
                        "indexed": true
                    },
                    {
                        "name": "amount",
                        "type": "BigUint"
                    }
                ]
            },
            {
                "identifier": "escrow_released",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes",
                        "indexed": true
                    },
                    {
                        "name": "receiver",
                        "type": "Address",
                        "indexed": true
                    },
                    {
                        "name": "amount",
                        "type": "BigUint"
                    }
                ]
            },
            {
                "identifier": "escrow_refunded",
                "inputs": [
                    {
                        "name": "job_id",
                        "type": "bytes",
                        "indexed": true
                    },
                    {
                        "name": "employer",
                        "type": "Address",
                        "indexed": true
                    },
                    {
                        "name": "amount",
                        "type": "BigUint"
                    }
                ]
            }
        ],
        "esdtAttributes": [],
        "hasCallback": false,
        "types": {
            "EscrowData": {
                "type": "struct",
                "docs": [
                    "On-chain escrow record."
                ],
                "fields": [
                    {
                        "name": "employer",
                        "type": "Address"
                    },
                    {
                        "name": "receiver",
                        "type": "Address"
                    },
                    {
                        "name": "token_id",
                        "type": "EgldOrEsdtTokenIdentifier"
                    },
                    {
                        "name": "token_nonce",
                        "type": "u64"
                    },
                    {
                        "name": "amount",
                        "type": "BigUint"
                    },
                    {
                        "name": "poa_hash",
                        "type": "bytes"
                    },
                    {
                        "name": "deadline",
                        "type": "u64"
                    },
                    {
                        "name": "status",
                        "type": "EscrowStatus"
                    }
                ]
            },
            "EscrowStatus": {
                "type": "enum",
                "docs": [
                    "Escrow settlement status."
                ],
                "variants": [
                    {
                        "name": "Active",
                        "discriminant": 0
                    },
                    {
                        "name": "Released",
                        "discriminant": 1
                    },
                    {
                        "name": "Refunded",
                        "discriminant": 2
                    }
                ]
            }
        }
    },
    "code": "0061736d01000000015a1060017f017f60027f7f017f60027f7f006000006000017f60017f0060037f7f7f017f60037f7f7f0060047f7f7f7f017f60057f7f7e7f7f017f60047f7f7f7f0060027f7e0060017f017e6000017e60027e7f0060027f7f017e02ea051e03656e76126d427566666572417070656e644279746573000603656e760b7369676e616c4572726f72000203656e760e626967496e74536574496e743634000b03656e7609626967496e74416464000703656e760a6d4275666665724e6577000403656e760d6d427566666572417070656e64000103656e760d6d616e6167656443616c6c6572000503656e76126d616e616765645369676e616c4572726f72000503656e76106d4275666665724765744c656e677468000003656e761b736d616c6c496e74476574556e7369676e6564417267756d656e74000c03656e760f6765744e756d417267756d656e7473000403656e760d6d42756666657246696e697368000003656e76226d616e616765644d756c74695472616e73666572455344544e465445786563757465000903656e761b6d616e616765645472616e7366657256616c756545786563757465000903656e76146d427566666572436f707942797465536c696365000803656e760f6d4275666665725365744279746573000603656e76196d42756666657246726f6d426967496e74556e7369676e6564000103656e76126d42756666657253746f726167654c6f6164000103656e76136d42756666657253746f7261676553746f7265000103656e76176d427566666572546f426967496e74556e7369676e6564000103656e76126d427566666572476574417267756d656e74000103656e761c6d616e616765644765744d756c74694553445443616c6c56616c7565000503656e7612626967496e7447657443616c6c56616c7565000503656e760a626967496e745369676e000003656e7611676574426c6f636b54696d657374616d70000d03656e760f6d616e6167656457726974654c6f67000203656e760e636865636b4e6f5061796d656e74000303656e761d6d42756666657253746f726167654c6f616446726f6d41646472657373000703656e76136d42756666657247657442797465536c696365000803656e76096d4275666665724571000103373602000400020401000605050000050400010a06070a0802000104000202020e02020201000f010000020100040403030303030303030305030100030616037f01418080080b7f00419d85080b7f0041a085080b07ad010c066d656d6f727902000863616c6c4261636b004b076465706f736974004c0a6765745f657363726f77004d1d6765745f6964656e746974795f636f6e74726163745f61646472657373004e1f6765745f76616c69646174696f6e5f636f6e74726163745f61646472657373004f04696e6974005006726566756e6400510772656c656173650052077570677261646500530a5f5f646174615f656e6403010b5f5f686561705f6261736503020c01020adb1c363601017f230041106b220224002002200041ff017141027428028c85082d00003a000f20012002410f6a410110001a200241106a24000b1601017f1020220142001002200120012000100320010b1901017f419885084198850828020041016b220036020020000b0f01017f10042201200010051a20010b0900200020011001000b0c01017f10202200100620000b1101017f1020220220002001100f1a20020b0d0020001020220010141a20000b3e002000102522001008412047044041c680084117102422002001200210001a200041dd8008410310001a200041d78108411010001a20001007000b20000b1400100a20004604400f0b41e0800841191001000b090020001029100b1a0b1f01017f20001038220110084120470440200041d7810841101031000b20010b2b01027f2000419c85082d0000220171200041ff0171462202450440419c850820002001723a00000b20020bb00202017e067f230041106b2203240020002802102104200028020c21022000290300210120002802082100102c2105102c210602402000280200102d4504402000280200102c2107102121002002280200101f21022003200142388620014280fe0383422886842001428080fc0783421886200142808080f80f834208868484200142088842808080f80f832001421888428080fc07838420014228884280fe038320014238888484843702042003200041187420004180fe03714108747220004108764180fe0371200041187672723602002003200241187420024180fe03714108747220024108764180fe03712002411876727236020c20072003411010001a20042802002007420020052006100c1a0c010b20042802002002280200420020052006100d1a0b200341106a24000b08004101410010240b13004158419e8008410b100f1a4158200010360b5401017f230041106b220224002002410036020c20002002410c6a41042001102f2000200228020c220041187420004180fe03714108747220004108764180fe03712000411876727220011030200241106a24000b3901017f2000280208200028020422046b2002490440200341f98008410f1031000b200028020020042001200210322000200220046a3602040b4b01037f02402000280204220420002802002205100822034b0d002003200120046a2203490d0020052004200110042201100e0d002000200336020420010f0b200241f98008410f1031000b2c01017f41bc8108411b10242203200010051a200341dd8008410310001a20032001200210001a20031007000b1a00200020012002200310334504400f0b4188810841131001000b0f002000200120032002101c4100470b4601017f230041106b220224002002200141187420014180fe03714108747220014108764180fe03712001411876727236020c20002002410c6a410410001a200241106a24000b0f01017f10202201200010101a20010b0b0020002001101d41004a0b0a00419e8008410b10240b0d0020001020220010111a20000b5701027f230041106b22022400200220012802001008220341187420034180fe03714108747220034108764180fe03712003411876727236020c20002002410c6a410410001a2000200128020010051a200241106a24000b5b01017f4101410010242202200128021010051a2002200128021410051a20012802182002103b20012903002002103c200128021c2002103d20012802202002103e20012903082002103c20012d00242002101e2000200210121a0b4801017f230041106b2202240002402000102d45044020002001103e0c010b2002418080802036020c20012002410c6a410410001a200141b88108410410001a0b200241106a24000b7801017f230041106b220224002002200042388620004280fe0383422886842000428080fc0783421886200042808080f80f834208868484200042088842808080f80f832000421888428080fc07838420004228884280fe038320004238888484843703082001200241086a410810001a200241106a24000b0a00200010352001103e0b5101027f230041106b22022400200220001008220341187420034180fe03714108747220034108764180fe03712003411876727236020c20012002410c6a410410001a2001200010051a200241106a24000b8d0202077f027e230041106b220324002003200110382202100836020c2003410036020820032002360204200341046a220220011040210520022001104021060240024020022001102e220210410d000240200210080e050102020200020b20021041450d010b103721020b200341046a220420011042210920042001102e1020220710131a20042001102e2108200420011042210a0240200420011043220441ff01714103490440200328020c2003280208470d01200020043a0024200020083602202000200736021c2000200236021820002006360214200020053602102000200a37030820002009370300200341106a24000f0b2001418e8008410d1031000b200141808008410e1031000b0a0020004120200110300b4301027f230041106b220124002000100841044604402001410036020c200041002001410c6a410410331a200128020c41c58eb1a2044621020b200141106a240020020b840102017e017f230041106b22032400200342003703082000200341086a41082001102f20032903082102200341106a2400200242388620024280fe0383422886842002428080fc0783421886200242808080f80f834208868484200242088842808080f80f832002421888428080fc07838420024228884280fe038320024238888484840b2d01017f230041106b22022400200241003a000f20002002410f6a41012001102f20022d000f200241106a24000b0e002000416710111a41671008450b0900102c1a200010350b0d00102c1a20002001102110340b1201017f102c2202200020011024103420020b1401017f41958208410a102422012000103920010b0a00419f8208411710240b0a0041b68208411910240b02000b9704020a7f027e230041306b2200240041041027410010252103410141ce840841081026210441021025210541031009210b200020033602044102102a450440415a10150b0240024002400240027f024002400240415a10084104760e020102000b41a98008411d1001000b103721014101102a450440415d10160b415d101f0c010b200041106a420037030020004200370308415a1008410f4d0d01415a4100200041086a41101032200029020c220a423886200a4280fe038342288684200a428080fc0783421886200a42808080f80f834208868484200a42088842808080f80f83200a421888428080fc078384200a4228884280fe0383200a423888848484210a200028021421022000280208220141187420014180fe03714108747220014108764180fe03712001411876727210212101200241187420024180fe03714108747220024108764180fe037120024118767272101f0b2202101741004c0d011018200b5a0d02200041046a104822061044450d0310232207102121082001102121012002101f2109200020013602202000200436021c2000200836021820002005360228200020093602242000200a370308200041003a002c2000200b3703102006200041086a103a41858208411010472201200310462001200710462001200210451019200041306a24000f0b419b8108411d1001000b41a4830841281022000b41cc8308411e1022000b41ea830841221022000b860101027f230041306b22002400101a41011027200041001025360204200041086a200041046a1048103f4101410010242201200028021810051a2001200028021c10051a20002802202001103b20002903082001103c20002802242001103d20002802282001103e20002903102001103c20002d002c2001101e2001100b1a200041306a24000b0c00101a41001027104910280b0c00101a41001027104a10280b3001027f101a41021027410041ef8408411b10262100410141d68408411910262101104a200010121a1049200110121a0bfd0102057f017e230041e0006b22002400101a41011027200041001025220236020c024002402000410c6a104822011044450440200041106a22032001103f20002d00340d0110182000290318580d02200041023a003420002000280220102136023c2000200028022c101f22043602402000200028022810213602442000290310210520012003103a200020053703482000200041406b3602542000200041c4006a36025020002000413c6a360258200041c8006a102b41e78108410f10472201200210462001200028023c10462001200410451019200041e0006a24000f0b41878308411d1022000b41d6820841161022000b41ec8208411b1022000bc00302077f017e230041e0006b22002400101a41011027200041001025220536020c0240024002400240024002402000410c6a2203104822041044450440200041106a22062004103f20002d00340d01102320002802201036450d02104a1029210241cf820841071024220120031039200220014167101b41671008450d052002200110202202101b2000200210083602502000410036024c20002002360248200041c8006a220220011043220341ff017141044f0d0320022001102e1a2002200110401a2002200110421a2002200110421a2000280250200028024c470d04200341ff01714102470d06200041013a003420002000280224102136023c2000200028022c101f22033602402000200028022810213602442000290310210720042006103a200020073703482000200041406b3602542000200041c4006a36025020002000413c6a3602582002102b41f68108410f10472201200510462001200028023c10462001200310451019200041e0006a24000f0b41878308411d1022000b41d6820841161022000b418c8408411f1022000b2001418e8008410d1031000b200141808008410e1031000b41878308411d1022000b41ab840841231022000b0800101a410010270b0bab050200418080080b9705696e70757420746f6f206c6f6e67696e76616c69642076616c756500010245474c442d303030303030696e636f7272656374206e756d626572206f66207472616e7366657273617267756d656e74206465636f6465206572726f722028293a2077726f6e67206e756d626572206f6620617267756d656e7473696e70757420746f6f2073686f7274736c696365206f7574206f6620626f756e64734d616e6167656456656320696e646578206f7574206f662072616e676545474c4473746f72616765206465636f6465206572726f7220286b65793a20626164206172726179206c656e677468657363726f775f726566756e646564657363726f775f72656c6561736564657363726f775f6465706f7369746564657363726f77446174616964656e74697479436f6e74726163744164647265737376616c69646174696f6e436f6e7472616374416464726573736a6f6244617461457363726f7720616c726561647920736574746c6564446561646c696e6520686173206e6f742070617373656420796574457363726f77206e6f7420666f756e6420666f722074686973206a6f624465706f73697420616d6f756e74206d7573742062652067726561746572207468616e207a65726f446561646c696e65206d75737420626520696e2074686520667574757265457363726f7720616c72656164792065786973747320666f722074686973206a6f624f6e6c792074686520656d706c6f7965722063616e2063616c6c20746869734a6f62206d757374206265207665726966696564206265666f72652072656c6561736572656365697665726964656e746974795f636f6e74726163745f6164647265737376616c69646174696f6e5f636f6e74726163745f6164647265737300001b0002001c0002001d000200419885080b0438ffffff",
    "report": {
        "imports": [
            "bigIntAdd",
            "bigIntGetCallValue",
            "bigIntSetInt64",
            "bigIntSign",
            "checkNoPayment",
            "getBlockTimestamp",
            "getNumArguments",
            "mBufferAppend",
            "mBufferAppendBytes",
            "mBufferCopyByteSlice",
            "mBufferEq",
            "mBufferFinish",
            "mBufferFromBigIntUnsigned",
            "mBufferGetArgument",
            "mBufferGetByteSlice",
            "mBufferGetLength",
            "mBufferNew",
            "mBufferSetBytes",
            "mBufferStorageLoad",
            "mBufferStorageLoadFromAddress",
            "mBufferStorageStore",
            "mBufferToBigIntUnsigned",
            "managedCaller",
            "managedGetMultiESDTCallValue",
            "managedMultiTransferESDTNFTExecute",
            "managedSignalError",
            "managedTransferValueExecute",
            "managedWriteLog",
            "signalError",
            "smallIntGetUnsignedArgument"
        ],
        "isMemGrow": false,
        "eiCheck": {
            "eiVersion": "1.5",
            "ok": true
        },
        "codeReport": {
            "path": "../output/escrow.wasm",
            "size": 5478,
            "hasAllocator": false,
            "hasPanic": "None"
        }
    }
}
